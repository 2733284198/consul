<form>
  <fieldset>
{{#if this.create }}
      <label class="type-text{{if this.item.error.Name ' has-error'}}">
          <span>Name</span>
          <input autofocus="autofocus" type="text" value={{this.item.Name}} name="Name" oninput={{action 'change'}} placeholder="Name" />
          <em>
            Must be a valid DNS hostname. Must contain 1-64 characters (numbers, letters, and hyphens), and must begin with a letter. Once created, this cannot be changed.
          </em>
          {{#if this.item.error.Name}}
            <strong>{{this.item.error.Name.validation}}</strong>
          {{/if}}
      </label>
{{/if}}
    <label class="type-text validate-optional">
      <span>Description (Optional)</span>
      <textarea name="Description" oninput={{action 'change'}}>{{this.item.Description}}</textarea>
    </label>
  </fieldset>
{{#if (env 'CONSUL_ACLS_ENABLED')}}
  <fieldset id="roles">
    <h2>Roles</h2>
    <p>
      By adding roles to this namespaces, you will apply them to all tokens created within this namespace.
    </p>
    <RoleSelector @dc={{this.dc}} @nspace="default" @items={{this.item.ACLs.RoleDefaults}} />
  </fieldset>
  <fieldset id="policies">
    <h2>Policies</h2>
    <p>
      By adding policies to this namespaces, you will apply them to all tokens created within this namespace.
    </p>
    <PolicySelector @dc={{this.dc}} @nspace="default" @allowIdentity={{false}} @items={{this.item.ACLs.PolicyDefaults}} />
  </fieldset>
{{/if}}
  <div>
{{#if this.create }}
      <button type="submit" {{ action "create" this.item}} disabled={{if (or this.item.isPristine this.item.isInvalid) 'disabled'}}>Save</button>
{{ else }}
      <button type="submit" {{ action "update" this.item}} disabled={{if this.item.isInvalid 'disabled'}}>Save</button>
{{/if}}
      <button type="reset" {{ action "cancel" this.item}}>Cancel</button>
{{# if (and (not this.create) (not-eq this.item.Name 'default')) }}
      <ConfirmationDialog @message="Are you sure you want to delete this Namespace?">
          <BlockSlot @name="action" as |confirm|>
              <button data-test-delete type="button" class="type-delete" {{action confirm 'delete' this.item this.parent}}>Delete</button>
          </BlockSlot>
          <BlockSlot @name="dialog" as |execute cancel message|>
            <DeleteConfirmation @message={{message}} @execute={{execute}} @cancel={{cancel}} />
          </BlockSlot>
      </ConfirmationDialog>
{{/if}}
  </div>
</form>

