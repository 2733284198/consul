<form class="filter-bar">
  <FreetextFilter
    @onsearch={{action this.onsearch}}
    @value={{this.search}}
    @placeholder="Search"
  />
  <div class="filters">
    <PopoverSelect
      @position="left"
      @onchange={{action this.onfilter.access}}
      @multiple={{true}}
    as |components|>
      <BlockSlot @name="selected">
        <span>
          Permissions
        </span>
      </BlockSlot>
      <BlockSlot @name="options">
{{#let components.Optgroup components.Option as |Optgroup Option|}}
        <Option @value="allow" @selected={{contains 'allow' this.filter.accesses}}>Allow</Option>
        <Option @value="deny" @selected={{contains 'deny' this.filter.accesses}}>Deny</Option>
{{/let}}
      </BlockSlot>
    </PopoverSelect>
  </div>
  <div class="sort">
    <PopoverSelect
      class="type-sort"
      data-test-sort-control
      @position="right"
      @onchange={{action this.onsort}}
      @multiple={{false}}
    as |components|>
      <BlockSlot @name="selected">
        <span>
          {{#let (from-entries (array
              (array "Action:asc" "Allow to Deny")
              (array "Action:desc" "Deny to Allow")
              (array "SourceName:asc" "Source: A to Z")
              (array "SourceName:desc" "Source: Z to A")
              (array "DestinationName:asc" "Destination: A to Z")
              (array "DestinationName:desc" "Destination: Z to A")
              (array "Precedence:asc" "Precedence: Ascending")
              (array "Precedence:desc" "Precedence: Descending")
              ))
            as |selectable|
          }}
            {{get selectable this.sort}}
          {{/let}}
        </span>
      </BlockSlot>
      <BlockSlot @name="options">
{{#let components.Optgroup components.Option as |Optgroup Option|}}
        <Optgroup @label="Permission">
          <Option @value="Action:asc" @selected={{eq "Action:asc" this.sort}}>Allow to Deny</Option>
          <Option @value="Action:desc" @selected={{eq "Action:desc" this.sort}}>Deny to Allow</Option>
        </Optgroup>
        <Optgroup @label="Source">
          <Option @value="SourceName:asc" @selected={{eq "SourceName:asc" this.sort}}>A to Z</Option>
          <Option @value="SourceName:desc" @selected={{eq "SourceName:desc" this.sort}}>Z to A</Option>
        </Optgroup>
        <Optgroup @label="Destination">
          <Option @value="DestinationName:asc" @selected={{eq "DestinationName:asc" this.sort}}>A to Z</Option>
          <Option @value="DestinationName:desc" @selected={{eq "DestinationName:desc" this.sort}}>Z to A</Option>
        </Optgroup>
        <Optgroup @label="Precedence">
          <Option @value="Precedence:asc" @selected={{eq "Precedence:asc" this.sort}}>Ascending</Option>
          <Option @value="Precedence:desc" @selected={{eq "Precedence:desc" this.sort}}>Descending</Option>
        </Optgroup>
{{/let}}
      </BlockSlot>
    </PopoverSelect>
  </div>
</form>